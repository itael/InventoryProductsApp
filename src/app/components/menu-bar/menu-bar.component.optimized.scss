@use '../../shared/styles/_variables' as *;
@use '../../shared/styles/_mixins' as *;

.menu-bar {
  background: $bg-gradient-primary; color: white; padding: 0; box-shadow: $shadow-md;
  position: sticky; top: 0; z-index: $z-index-sticky; border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.menu-container {
  display: flex; align-items: center; justify-content: space-between;
  max-width: 1400px; margin: 0 auto; padding: 0 20px; gap: 20px;
  @include mobile { flex-direction: column; padding: 15px; gap: 15px; }
  @include tablet { padding: 0 15px; gap: 15px; }
}

.user-info {
  display: flex; align-items: center; gap: 12px; padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1); border-radius: $border-radius-md; backdrop-filter: blur(10px);
  @include mobile { width: 100%; justify-content: center; }
}

.user-avatar {
  width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center;
  justify-content: center; background: rgba(255, 255, 255, 0.2);
  font-weight: 600; font-size: $font-size-lg;
  @include mobile { width: 36px; height: 36px; font-size: $font-size-base; }
}

.user-details {
  display: flex; flex-direction: column; gap: 2px;
  @include mobile { display: none; }
}

.user-name {
  font-weight: 600; font-size: $font-size-sm; line-height: 1.2;
  @include mobile { font-size: $font-size-xs; }
}

.user-role {
  font-size: $font-size-xs; color: rgba(255, 255, 255, 0.7); line-height: 1.2;
}

.primary-nav {
  display: flex; gap: 8px;
  @include mobile { width: 100%; justify-content: center; flex-wrap: wrap; }
}

.nav-btn {
  display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px;
  text-decoration: none; color: rgba(255, 255, 255, 0.9); background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2); border-radius: $border-radius-md;
  transition: all $transition-normal; font-weight: $font-weight-medium;
  @include text-responsive($font-size-sm, $font-size-sm, $font-size-xs);
  @include mobile { padding: 12px 16px; width: 100%; justify-content: center; max-width: 200px; }

  i { @include text-responsive(1.1rem, 1rem, 1rem); }

  &:hover {
    background: rgba(255, 255, 255, 0.15); color: white; transform: translateY(-1px);
  }

  &.active {
    background: rgba(255, 255, 255, 0.2); color: white; box-shadow: $shadow-sm;
  }

  &.dashboard {
    background: rgba(231, 76, 60, 0.2);
    &:hover, &.active { background: rgba(231, 76, 60, 0.3); }
  }
}

.crud-sections {
  display: flex; gap: 30px; flex: 1; justify-content: center;
  @include mobile { gap: 15px; width: 100%; justify-content: space-around; flex-wrap: wrap; }
}

.crud-section {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
}

.section-label {
  font-size: $font-size-xs; font-weight: 600; color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;
  @include mobile { font-size: 0.65rem; }
}

.crud-buttons {
  display: flex; gap: 6px;
  @include mobile { gap: 4px; }
}

.crud-btn {
  display: flex; flex-direction: column; align-items: center; gap: 4px;
  padding: 8px 12px; text-decoration: none; color: rgba(255, 255, 255, 0.9);
  background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: $border-radius; transition: all $transition-normal;
  font-weight: $font-weight-medium; font-size: $font-size-xs;
  @include mobile { padding: 6px 8px; font-size: 0.7rem; min-width: 50px; }

  i {
    font-size: 1.2rem; margin-bottom: 2px;
    @include mobile { font-size: 1rem; }
  }

  &:hover {
    transform: translateY(-2px); box-shadow: $shadow;
    @include mobile { transform: translateY(-1px); }
  }

  &.list {
    background: rgba(52, 152, 219, 0.2);
    &:hover, &.active { background: rgba(52, 152, 219, 0.35); color: white; }
  }

  &.create {
    background: rgba(39, 174, 96, 0.2);
    &:hover, &.active { background: rgba(39, 174, 96, 0.35); color: white; }
  }

  &.active { color: white; box-shadow: $shadow-sm; }
}

.quick-actions {
  position: relative; display: flex; align-items: center;
  @include mobile { order: -1; margin-bottom: 10px; }
}

.actions-btn {
  display: flex; align-items: center; gap: 8px; padding: 10px 16px;
  background: rgba(255, 255, 255, 0.1); color: white; text-decoration: none;
  border: 1px solid rgba(255, 255, 255, 0.2); border-radius: $border-radius-md;
  font-weight: $font-weight-medium; transition: all $transition-normal;
  @include text-responsive($font-size-sm, $font-size-sm, $font-size-xs);
  @include mobile { padding: 8px 12px; }

  &:hover { background: rgba(255, 255, 255, 0.2); color: white; }

  .chevron {
    transition: transform $transition-fast; font-size: 0.8rem;
    &.rotated { transform: rotate(180deg); }
  }
}

.dropdown-menu {
  position: absolute; top: 100%; right: 0; margin-top: 8px; background: white;
  border-radius: $border-radius-lg; box-shadow: $shadow-xl; opacity: 0; visibility: hidden;
  transform: translateY(-10px); transition: all $transition-normal; min-width: 220px;
  z-index: $z-index-dropdown;
  @include mobile {
    left: 50%; right: auto; transform: translateX(-50%) translateY(-10px); min-width: 200px;
  }

  &.show {
    opacity: 1; visibility: visible; transform: translateY(0);
    @include mobile { transform: translateX(-50%) translateY(0); }
  }
}

.dropdown-item {
  display: flex; align-items: center; gap: 12px; padding: 12px 16px;
  text-decoration: none; color: $gray-800; transition: all $transition-normal;
  font-weight: $font-weight-medium;
  @include text-responsive($font-size-sm, $font-size-sm, $font-size-xs);

  &:first-child { border-radius: $border-radius-lg $border-radius-lg 0 0; }
  &:last-child { border-radius: 0 0 $border-radius-lg $border-radius-lg; }

  &:hover {
    background: $gray-50; color: $color-primary;
    @include mobile { background: $gray-100; }
  }

  i {
    font-size: 1rem; color: $gray-600; transition: color $transition-fast;
    @include mobile { font-size: 0.9rem; }
  }

  &:hover i { color: $color-primary; }

  &.separator {
    border-top: 1px solid $gray-200; margin-top: 4px; padding-top: 12px;
  }

  &.danger {
    color: $color-danger;
    &:hover { background: rgba(220, 53, 69, 0.1); color: $color-danger; }
  }
}

@media (prefers-contrast: high) {
  .menu-bar {
    border-bottom: 3px solid white;
    .dropdown-menu { border: 2px solid $gray-800; }
  }
}

@media (prefers-reduced-motion: reduce) {
  .menu-bar * { transition: background-color $transition-fast, color $transition-fast; }
}

@media (max-width: 320px) {
  .menu-bar .crud-sections { flex-direction: column; gap: 10px; }
  .crud-section .crud-buttons { justify-content: center; }
}

.menu-bar .quick-actions .dropdown-menu:not(.show) { pointer-events: none; }
